# 德國橋牌計分程式 - 測試框架

## 📋 概述

這個測試框架確保在進行界面改動時，核心功能保持正常工作。測試涵蓋了遊戲的所有關鍵功能，包括遊戲流程、分數計算、數據存儲等。

## 🚀 快速開始

### 方法1: 使用自動化腳本
```bash
# 雙擊運行
test/run-tests.bat
```

### 方法2: 手動運行
```bash
# 啟動測試服務器
python -m http.server 8001

# 在瀏覽器中打開
http://localhost:8001/test/test-framework.html
```

## 🧪 測試內容

### 關鍵測試 (必須通過)
1. **遊戲初始化測試** - 確保遊戲實例正確創建
2. **事件監聽器測試** - 確保所有按鈕和事件正確設置
3. **本地存儲測試** - 確保數據保存和載入功能正常
4. **遊戲流程測試** - 確保完整的遊戲流程正常工作
5. **叫牌流程測試** - 確保叫牌過程和邏輯正確
6. **出牌結果調整測試** - 確保可以正確調整出牌結果
7. **分數計算測試** - 確保分數計算邏輯正確
8. **回合管理測試** - 確保新回合開始和牌數變化正確
9. **牌數分配測試** - 確保不同人數的牌數分配正確
10. **清除遊戲測試** - 確保清除遊戲功能正常工作

### 界面測試 (建議通過)
11. **數字鍵盤測試** - 確保數字鍵盤功能正常
12. **階段切換測試** - 確保遊戲階段正確切換
13. **歷史記錄測試** - 確保歷史記錄功能正常

## 📊 測試結果解讀

- ✅ **通過** - 功能正常工作
- ❌ **失敗** - 功能有問題，需要修復
- ⚠️ **警告** - 非關鍵功能有問題

### 成功標準
- **關鍵測試**: 100% 通過
- **總體測試**: 建議 90% 以上通過

## 🔧 界面改動指南

### ✅ 可以安全修改的內容
- CSS樣式和視覺效果
- HTML結構（不改變ID和class名稱）
- 響應式設計
- 動畫效果
- 用戶界面布局

### ❌ 不要修改的內容
- JavaScript核心邏輯
- HTML元素的ID屬性
- 事件監聽器綁定
- 數據結構
- API接口

## 📝 使用流程

### 在界面改動前
1. 運行完整測試套件
2. 記錄所有測試結果
3. 確保所有關鍵測試通過

### 進行界面改動
1. 只修改CSS和HTML結構
2. 保持所有ID和class名稱不變
3. 不修改JavaScript核心邏輯

### 在界面改動後
1. 再次運行完整測試套件
2. 比較測試結果
3. 修復任何失敗的測試
4. 確保關鍵功能仍然正常

## 🐛 故障排除

### 測試失敗時
1. 檢查瀏覽器控制台是否有錯誤
2. 確認所有文件都正確載入
3. 檢查JavaScript語法是否正確
4. 驗證HTML結構是否完整

### 常見問題
- **遊戲實例不存在**: 檢查game.js是否正確載入
- **按鈕不存在**: 檢查HTML中是否有對應的ID
- **存儲功能失敗**: 檢查localStorage是否可用
- **事件監聽器失敗**: 檢查JavaScript事件綁定

## 📈 測試報告

每次測試後會生成詳細的測試報告，包括：
- 測試執行時間
- 通過/失敗統計
- 詳細錯誤信息
- 建議修復方案

## 🔄 持續集成

建議在每次代碼修改後都運行測試，確保：
- 新功能不會破壞現有功能
- 界面改動不會影響核心邏輯
- 代碼質量保持穩定

## 📞 支持

如果測試框架有任何問題，請檢查：
1. 瀏覽器控制台錯誤
2. 網絡連接是否正常
3. 服務器是否正確啟動
4. 文件路徑是否正確
