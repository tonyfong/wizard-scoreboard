<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¾·åœ‹æ©‹ç‰Œè¨˜åˆ†</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        /* éŠæˆ²ç‹€æ…‹ç®¡ç† */
        .game-state {
            display: none;
        }
        
        .game-state.active {
            display: block;
        }
        
        /* éŠæˆ²è¨­ç½®æ¨£å¼ */
        .game-setup {
            text-align: center;
            padding: 20px;
        }
        
        .setup-controls {
            display: flex;
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }
        
        /* ç©å®¶åç¨±è¨­ç½®æ¨£å¼ */
        .player-names-section {
            width: 100%;
            max-width: 400px;
        }
        
        .player-names-section label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        #player-names-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }
        
        .player-name-input {
            padding: 8px 12px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 14px;
        }
        
        /* è¨ˆåˆ†æ–¹æ³•é¸æ“‡æ¨£å¼ */
        .scoring-method-section {
            width: 100%;
            max-width: 400px;
        }
        
        .scoring-method-section label {
            display: block;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .scoring-options {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .radio-option {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .radio-option:hover {
            background-color: #f5f5f5;
        }
        
        .radio-option input[type="radio"] {
            margin: 0;
        }
        
        .radio-option span {
            font-size: 14px;
        }
        
        .player-count-select {
            padding: 10px 15px;
            font-size: 18px;
            border: 2px solid #3498db;
            border-radius: 8px;
            background: white;
        }
        
        /* çµ±ä¸€è¡Œå‹•æŒ‰éˆ•æ¨£å¼ */
        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            padding: 20px 0;
            border-top: 1px solid #eee;
        }
        
        .action-btn {
            flex: 1;
            min-width: 100px;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }
        
        .primary-btn {
            background-color: #27ae60;
            color: white;
        }
        
        .primary-btn:hover {
            background-color: #229954;
        }
        
        .danger-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .danger-btn:hover {
            background-color: #c0392b;
        }
        
        .secondary-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .secondary-btn:hover {
            background-color: #8e44ad;
        }
        
        /* å‘å¾Œå…¼å®¹çš„æŒ‰éˆ•é¡åˆ¥ */
        .start-game-btn {
            background-color: #27ae60;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            width: 100%;
            max-width: 200px;
        }
        
        .start-game-btn:hover {
            background-color: #229954;
        }
        
        .clear-game-btn {
            background-color: #e74c3c;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .clear-game-btn:hover {
            background-color: #c0392b;
        }
        
        /* å«ç‰Œéšæ®µæ¨£å¼ */
        .bidding-phase {
            padding: 10px 20px 20px 20px;
        }
        
        /* ä¸»æ¨™é¡Œæ¡†æ¨£å¼ */
        .main-title-box {
            background: #f8f9fa;
            padding: 6px 10px;
            border-radius: 6px;
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .main-title-box h1 {
            margin: 0;
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }
        
        .rules-btn {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #3498db;
            color: white;
            border: none;
            font-size: 12px;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .rules-btn:hover {
            background: #2980b9;
        }
        
        /* æ¬¡æ¨™é¡Œæ¡†æ¨£å¼ */
        .round-info {
            background: #f8f9fa;
            padding: 12px 20px;
            border-radius: 8px;
            margin-bottom: 12px;
            text-align: center;
        }
        
        .round-number {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }
        
        .round-details {
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 16px;
            color: #666;
        }
        
        .cards-info {
            flex: 1;
            text-align: left;
        }
        
        .trump-info {
            flex: 1;
            text-align: right;
        }
        
        /* æ¨¡æ…‹æ¡†æ¨£å¼ */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            border-radius: 8px;
            max-width: 90%;
            max-height: 80%;
            overflow-y: auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            margin: 0;
            color: #333;
        }
        
        .close {
            font-size: 24px;
            font-weight: bold;
            color: #999;
            cursor: pointer;
            line-height: 1;
        }
        
        .close:hover {
            color: #333;
        }
        
        .modal-body {
            padding: 20px;
        }
        
        .modal-body h3 {
            margin-top: 0;
            color: #333;
        }
        
        .modal-body p {
            margin: 10px 0;
            line-height: 1.5;
        }
        
        .modal-body ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .modal-body li {
            margin: 5px 0;
            line-height: 1.5;
        }
        
        .current-player {
            background: #e3f2fd;
            border: 2px solid #2196f3;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .bidding-summary {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #eee;
            padding: 15px;
            text-align: center; /* è®“é–‹å§‹å‡ºç‰ŒæŒ‰éˆ•ç½®ä¸­ */
            z-index: 1000;
        }
        
        .results-action-bar {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #eee;
            padding: 15px;
            text-align: center;
            z-index: 1000;
        }
        
        /* éŠæˆ²æµç¨‹æ¨£å¼ */
        .game-flow {
            text-align: center;
            margin-bottom: 12px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .clear-game-quick-btn {
            background: none;
            border: none;
            font-size: 16px;
            cursor: pointer;
            opacity: 0.5;
            transition: opacity 0.2s;
            padding: 4px;
            border-radius: 4px;
            margin-left: 10px;
        }
        
        .clear-game-quick-btn:hover {
            opacity: 1;
            background-color: rgba(255, 0, 0, 0.1);
        }
        
        .flow-step {
            padding: 5px 10px;
            margin: 0 5px;
            border-radius: 5px;
            transition: all 0.3s;
        }
        
        .flow-step.current {
            background: #3498db;
            color: white;
            font-weight: bold;
            font-size: 1.2em;
        }
        
        /* ç©å®¶å«ç‰Œç‹€æ…‹æ¨£å¼ */
        .players-bidding-status {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        /* çµ±ä¸€ç©å®¶å¡ç‰‡æ¨£å¼ */
        .player-bidding-card,
        .player-result,
        .player-score {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 16px;
            margin: 10px 0;
            transition: all 0.3s;
            min-height: 80px;
            display: flex;
            align-items: center;
        }
        
        .player-bidding-card.current {
            border-color: #3498db;
            background: #e3f2fd;
            box-shadow: 0 2px 8px rgba(52, 152, 219, 0.3);
        }
        
        .player-bidding-card h3,
        .player-result h3,
        .player-score h3 {
            margin: 0 0 5px 0;
            color: #2c3e50;
            font-size: 18px;
            font-weight: bold;
        }

        /* çµ±ä¸€æ‰€æœ‰æµç¨‹å¡ç‰‡çš„å…©è¡Œæ–‡å­—çš†é å·¦ */
        .player-bidding-card,
        .player-bidding-card .status,
        .player-result .player-info,
        .player-result .player-info .bid-info,
        .player-score .player-info,
        .player-score .player-info .score-formula {
            text-align: left;
        }
        
        .player-bidding-card .status {
            font-size: 14px;
            color: #666;
        }
        
        .player-bidding-card.current .status {
            color: #3498db;
            font-weight: bold;
        }
        
        /* å‡ºç‰Œçµæœå¡ç‰‡ç‰¹æ®Šä½ˆå±€ */
        .player-result {
            justify-content: space-between;
        }
        
        .player-result .player-info {
            flex: 1;
        }
        
        .player-result .player-info .bid-info {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
        }
        
        .player-result .trick-controls {
            display: flex;
            align-items: center;
            gap: 8px;
            min-width: 92px;
            justify-content: flex-end;
        }
        
        .player-result .trick-number {
            font-size: 26px;
            font-weight: bold;
            color: #333;
            min-width: 24px;
            text-align: right;
        }
        .player-result .trick-number.mismatch {
            color: #e74c3c; /* ä¸ä¸€è‡´æ™‚ç”¨ç´…è‰² */
        }
        
        /* å‚ç›´çš„ä¸Šä¸‹ä¸‰è§’æŒ‰éˆ•ï¼Œä½”ç”¨æ›´å°‘é«˜åº¦ */
        .player-result .triangle-buttons {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }
        
        .player-result .triangle-btn {
            width: 28px;
            height: 20px;
            border: 1px solid #ddd;
            border-radius: 4px;
            background: #f8f9fa;
            color: #333;
            font-size: 12px;
            line-height: 18px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0;
        }
        .player-result .triangle-btn:hover:not(:disabled) {
            background: #e9ecef;
        }
        .player-result .triangle-btn:disabled {
            opacity: 0.45;
            cursor: not-allowed;
        }
        
        /* åˆ†æ•¸å¡ç‰‡ç‰¹æ®Šä½ˆå±€ */
        .player-score {
            justify-content: space-between;
            text-align: left;
        }
        
        .player-score .player-info {
            flex: 1;
        }
        
        .player-score .player-info .score-formula {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
        }
        
        .player-score .score-value {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            min-width: 80px;
            text-align: center;
        }

        /* ç•¶å‰åˆ†æ•¸é ï¼šä¿ç•™ç©å®¶å¡ç‰‡çš„ç°ç™½åº•èˆ‡é‚Šæ¡† */
        #score-display .player-score {
            background: white;
            border: 2px solid #e0e0e0;
            padding-left: 16px;
            padding-right: 16px;
        }
        
        /* åˆ†æ•¸è¨ˆç®—æ¨£å¼ */
        .score-calculation {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }
        
        .score-formula {
            font-size: 0.9em;
            color: #666;
        }
        
        .score-value {
            font-size: 1.5em;
            font-weight: bold;
            color: #3498db;
        }
        
        /* åˆ†æ•¸é¡¯ç¤ºå®¹å™¨æ¨£å¼ */
        .scores-container {
            background: transparent; /* å»æ‰å¤§é¢ç©ç™½åº• */
            border-radius: 0;
            padding: 0; /* å…§è·æ­¸é›¶ï¼Œè®“å¡ç‰‡é è¿‘å¤–æ¡† */
            margin-bottom: 20px;
            box-shadow: none;
        }
        
        /* æŒ‰éˆ•ä½ˆå±€æ¨£å¼ */
        .action-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .action-btn {
            flex: 1;
            min-width: 120px;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .clear-game-btn {
            background-color: #e74c3c;
            color: white;
        }
        
        .clear-game-btn:hover {
            background-color: #c0392b;
        }
        
        .history-btn {
            background-color: #9b59b6;
            color: white;
        }
        
        .history-btn:hover {
            background-color: #8e44ad;
        }
        
        .next-round-btn {
            background-color: #27ae60;
            color: white;
        }
        
        .next-round-btn:hover {
            background-color: #229954;
        }
        
        /* æ•¸å­—éµç›¤ç¸½å®¹å™¨ï¼ˆå›ºå®šåœ¨åº•éƒ¨ï¼Œåˆ†å…©è¡Œï¼šæç¤º + éµç›¤ï¼‰ */
        .number-keypad-wrapper {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #ddd;
            padding: 10px 15px;
            display: flex;
            flex-direction: column;
            gap: 8px;
            z-index: 1000;
        }

        /* ç•¶åº•éƒ¨å›ºå®šå€åŸŸé¡¯ç¤ºæ™‚ï¼Œç‚ºé é¢å…§å®¹é ç•™ç©ºé–“é¿å…è¢«é®æ“‹ */
        body.with-bottom-gap {
            padding-bottom: 140px; /* å…©è¡Œæç¤º+æŒ‰éˆ•çš„é«˜åº¦é ç•™ */
        }
        
        /* å‡ºç‰Œçµæœé é¢çš„åº•éƒ¨é–“è· */
        body.results-phase {
            padding-bottom: 80px; /* ç‚ºåº•éƒ¨è¨ˆç®—åˆ†æ•¸æŒ‰éˆ•é ç•™ç©ºé–“ */
        }

        /* ç¬¬äºŒè¡Œï¼šæ•¸å­—éµç›¤æ©«å‘æ’åˆ— */
        .number-keypad {
            display: flex;
            gap: 10px;
            overflow-x: auto;
            justify-content: flex-start;
            flex-wrap: nowrap;
            align-items: center;
        }
        
        .keypad-btn {
            width: 50px;
            height: 50px;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 8px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            flex-shrink: 0;
        }

        /* å«ç‰Œç¸½æ•¸æç¤ºï¼ˆå›ºå®šåœ¨æ•¸å­—éµç›¤æœ€å·¦å´ï¼‰ */
        .total-bids-indicator {
            display: flex;
            align-items: center;
            padding: 0 10px;
            font-size: 14px;
            color: #2c3e50;
            white-space: nowrap;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            background: #f8f9fa;
            height: 34px;
            flex: 0 0 auto;
        }

        /* ç¢ºèªéµé¡¯ç¤ºç¸½å«ç‰Œæç¤º */
        #confirm-bid.total-shown::after {
            content: attr(data-total-text);
            margin-left: 6px;
            font-size: 12px;
            color: #ffffffcc;
        }
        
        .keypad-btn:hover:not(:disabled) {
            background: #3498db;
            color: white;
        }
        
        .keypad-btn:disabled {
            background: #f5f5f5;
            color: #ccc;
            border-color: #ddd;
            cursor: not-allowed;
        }
        
        .keypad-btn.selected {
            background: #e74c3c;
            color: white;
            border-color: #e74c3c;
        }
        
        .confirm-btn {
            background: #27ae60 !important;
            color: white !important;
            border-color: #27ae60 !important;
            min-width: 80px !important;
        }
        
        .confirm-btn:hover:not(:disabled) {
            background: #229954 !important;
            border-color: #229954 !important;
        }
        
        /* å‡ºç‰Œçµæœæ¨£å¼ */
        .trick-results {
            padding: 20px;
        }
        
        .player-result {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            margin: 10px 0;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .adjust-buttons {
            display: flex;
            gap: 10px;
        }
        
        .adjust-btn {
            width: 40px;
            height: 40px;
            border: 2px solid #3498db;
            background: white;
            color: #3498db;
            border-radius: 50%;
            font-size: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .adjust-btn:hover {
            background: #3498db;
            color: white;
        }
        
        /* åˆ†æ•¸é¡¯ç¤ºæ¨£å¼ */
        .score-display {
            padding: 20px;
        }
        
        .score-grid {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin: 20px 0;
            padding-bottom: 80px; /* ç‚ºå›ºå®šæŒ‰éˆ•ç•™å‡ºç©ºé–“ */
        }
        
        .player-score {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }
        
        .player-name {
            font-weight: bold;
            margin-bottom: 8px;
            color: #2c3e50;
        }
        
        .score-value {
            font-size: 24px;
            color: #3498db;
        }
        
        .action-buttons {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid #eee;
            padding: 15px;
            display: flex;
            flex-direction: row;
            flex-wrap: nowrap; /* æ‰‹æ©Ÿä¹Ÿä¿æŒå–®è¡Œé¡¯ç¤º */
            gap: 10px;
            justify-content: center;
            z-index: 1000;
        }
        
        .action-btn {
            flex: 1;
            max-width: 150px;
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: background-color 0.3s;
            text-align: center;
        }
        
        .history-btn {
            background: #9b59b6;
            color: white;
        }
        
        .history-btn:hover {
            background: #8e44ad;
        }
        
        .next-round-btn {
            background: #27ae60;
            color: white;
        }
        
        .next-round-btn:hover {
            background: #229954;
        }
        
        /* éŸ¿æ‡‰å¼è¨­è¨ˆ */
        @media (max-width: 768px) {
            .number-keypad {
                padding: 10px;
            }
            
            .keypad-btn {
                width: 45px;
                height: 45px;
                font-size: 16px;
            }
            
            .score-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }
            
            .action-buttons {
                flex-direction: row;   /* æ‰‹æ©Ÿä¹Ÿç¶­æŒä¸€è¡Œä¸‰éµ */
                flex-wrap: nowrap;
                gap: 8px;
                padding: 10px;
            }

            .action-buttons .action-btn {
                flex: 1 1 0;   /* ä¸‰éµå¹³å‡åˆ†é…ï¼Œå…è¨±æ”¶ç¸® */
                min-width: 0;  /* å…è¨±åœ¨çª„è¢å¹•æ”¶ç¸® */
                max-width: none;
                padding: 10px 8px;
                font-size: 14px; /* ç¸®å°å­—é«”ä»¥é©é…å–®è¡Œ */
            }
        }
        
        /* è¦å‰‡æŒ‰éˆ• */
        .rules-button {
            position: fixed;
            top: 20px;
            right: 20px;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background-color: #3498db;
            color: white;
            border: none;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
            z-index: 1000;
        }
        
        .rules-button:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>å¾·åœ‹æ©‹ç‰Œè¨˜åˆ†</h1>
            <button id="show-rules" onclick="window.open('rules.html', '_blank')" class="rules-button">?</button>
        </header>

        <main>
            <!-- éŠæˆ²è¨­ç½®éšæ®µ -->
            <div id="game-setup" class="game-state active">
                <div class="game-setup">
                    <h2>éŠæˆ²è¨­ç½®</h2>
                    <div class="setup-controls">
                        <label for="player-count">é¸æ“‡ç©å®¶æ•¸é‡ï¼ˆ2-8äººï¼‰ï¼š</label>
                        <select id="player-count" class="player-count-select">
                            <option value="2">2äºº</option>
                            <option value="3">3äºº</option>
                            <option value="4" selected>4äºº</option>
                            <option value="5">5äºº</option>
                            <option value="6">6äºº</option>
                            <option value="7">7äºº</option>
                            <option value="8">8äºº</option>
                        </select>
                        
                        <!-- ç©å®¶åç¨±è¨­ç½® -->
                        <div id="player-names-section" class="player-names-section">
                            <label>ç©å®¶åç¨±è¨­ç½®ï¼š</label>
                            <div id="player-names-container">
                                <!-- å‹•æ…‹ç”Ÿæˆç©å®¶åç¨±è¼¸å…¥æ¡† -->
                            </div>
                        </div>
                        
                        <!-- è¨ˆåˆ†æ–¹æ³•é¸æ“‡ -->
                        <div class="scoring-method-section">
                            <label>è¨ˆåˆ†æ–¹æ³•ï¼š</label>
                            <div class="scoring-options">
                                <label class="radio-option">
                                    <input type="radio" name="scoring-method" value="squared" checked>
                                    <span>æ¨™æº–è¨ˆåˆ†ï¼šæ‰£åˆ† = -(è´å¢©æ•¸ - å«å¢©æ•¸)Â²</span>
                                </label>
                                <label class="radio-option">
                                    <input type="radio" name="scoring-method" value="cubed">
                                    <span>æ–°è¨ˆåˆ†ï¼šæ‰£åˆ† = -(è´å¢©æ•¸ - å«å¢©æ•¸)Â³</span>
                                </label>
                            </div>
                        </div>
                        
                        <button id="start-game" class="start-game-btn">é–‹å§‹éŠæˆ²</button>
                    </div>
                </div>
            </div>

            <!-- å«ç‰Œéšæ®µ -->
            <div id="bidding-phase" class="game-state">
                <div class="bidding-phase">
                    <!-- æ¬¡æ¨™é¡Œæ¡† -->
                    <div class="round-info">
                        <div class="round-number">ç¬¬<span id="current-round">1</span>å›åˆ</div>
                        <div class="round-details">
                            <span class="cards-info">æ¯äºº<span id="cards-per-player">1</span>å¼µç‰Œ</span>
                            <span class="trump-info">èŠ±è‰²: <span id="trump-suit">â™ </span></span>
                        </div>
                    </div>
                    
                    <!-- æ¨™é¡Œç¬¬äºŒè¡Œï¼šéŠæˆ²æµç¨‹ -->
                    <div class="game-flow">
                        <span class="flow-step current">å«ç‰Œ</span> > 
                        <span class="flow-step">å‡ºç‰Œçµæœ</span> > 
                        <span class="flow-step">ç•¶å‰åˆ†æ•¸</span>
                        <button id="clear-game-quick" class="clear-game-quick-btn" title="æ¸…é™¤éŠæˆ²">ğŸ—‘ï¸</button>
                    </div>
                    
                    <!-- ç©å®¶å«ç‰Œç‹€æ…‹ -->
                    <div class="players-bidding-status" id="players-bidding-status">
                        <!-- å‹•æ…‹ç”Ÿæˆç©å®¶ç‹€æ…‹ -->
                    </div>
                    
                    <!-- å«ç‰Œå®Œæˆå¾Œçš„æŒ‰éˆ• -->
                    <div class="bidding-summary" id="bidding-summary" style="display: none;">
                        <button id="start-playing" class="start-game-btn">é–‹å§‹å‡ºç‰Œ</button>
                    </div>
                </div>
            </div>

            <!-- å‡ºç‰Œçµæœéšæ®µ -->
            <div id="trick-results" class="game-state">
                <div class="trick-results">
                    <!-- æ¬¡æ¨™é¡Œæ¡† -->
                    <div class="round-info">
                        <div class="round-number">ç¬¬<span id="current-round-results">1</span>å›åˆ</div>
                        <div class="round-details">
                            <span class="cards-info">æ¯äºº<span id="cards-per-player-results">1</span>å¼µç‰Œ</span>
                            <span class="trump-info">èŠ±è‰²: <span id="trump-suit-results">â™ </span></span>
                        </div>
                    </div>
                    
                    <!-- æ¨™é¡Œç¬¬äºŒè¡Œï¼šéŠæˆ²æµç¨‹ -->
                    <div class="game-flow">
                        <span class="flow-step">å«ç‰Œ</span> > 
                        <span class="flow-step current">å‡ºç‰Œçµæœ</span> > 
                        <span class="flow-step">ç•¶å‰åˆ†æ•¸</span>
                    </div>
                    
                    <div class="results-instruction">
                        <p>è«‹èª¿æ•´å¯¦éš›è´å¾—çš„å¢©æ•¸</p>
                    </div>
                    <div id="results-list"></div>
                    
                    <!-- è¨ˆç®—åˆ†æ•¸æŒ‰éˆ• - å›ºå®šåœ¨åº•éƒ¨ -->
                    <div class="results-action-bar">
                        <button id="calculate-scores" class="start-game-btn">è¨ˆç®—åˆ†æ•¸</button>
                    </div>
                </div>
            </div>

            <!-- åˆ†æ•¸é¡¯ç¤ºéšæ®µ -->
            <div id="score-display" class="game-state">
                <div class="score-display">
                    <!-- æ¬¡æ¨™é¡Œæ¡† -->
                    <div class="round-info">
                        <div class="round-number">ç¬¬<span id="current-round-scores">1</span>å›åˆ</div>
                        <div class="round-details">
                            <span class="cards-info">æ¯äºº<span id="cards-per-player-scores">1</span>å¼µç‰Œ</span>
                            <span class="trump-info">èŠ±è‰²: <span id="trump-suit-scores">â™ </span></span>
                        </div>
                    </div>
                    
                    <!-- æ¨™é¡Œç¬¬äºŒè¡Œï¼šéŠæˆ²æµç¨‹ -->
                    <div class="game-flow">
                        <span class="flow-step">å«ç‰Œ</span> > 
                        <span class="flow-step">å‡ºç‰Œçµæœ</span> > 
                        <span class="flow-step current">ç•¶å‰åˆ†æ•¸</span>
                    </div>
                    
                    <!-- ç©å®¶åˆ†æ•¸é¡¯ç¤ºå®¹å™¨ -->
                    <div class="scores-container">
                        <div id="players-score" class="score-grid"></div>
                    </div>
                    
                    <!-- åº•éƒ¨æŒ‰éˆ• -->
                    <div class="action-buttons">
                        <button id="clear-game-from-scores" class="action-btn danger-btn">æ¸…é™¤éŠæˆ²</button>
                        <button id="show-history" class="action-btn secondary-btn">æ­·å²è¨˜éŒ„</button>
                        <button id="next-round" class="action-btn primary-btn">é–‹å§‹ä¸‹ä¸€å±€</button>
                    </div>
                </div>
            </div>

            <!-- æ­·å²è¨˜éŒ„å½ˆçª— -->
            <div id="history-modal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5); z-index: 2000;">
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; max-width: 90%; max-height: 80%; overflow-y: auto;">
                    <h3>æ­·å²è¨˜éŒ„</h3>
                    <div id="history-list"></div>
                    <button onclick="document.getElementById('history-modal').style.display='none'" class="action-btn" style="margin-top: 15px;">é—œé–‰</button>
                </div>
            </div>
        </main>
    </div>

    <!-- æ•¸å­—éµç›¤ -->
    <div id="number-keypad" class="number-keypad-wrapper" style="display: none;">
        <div id="total-bids-indicator" class="total-bids-indicator">å·²å…±å«0å¢©</div>
        <div class="number-keypad">
        <button class="keypad-btn" data-value="0">0</button>
        <button class="keypad-btn" data-value="1">1</button>
        <button class="keypad-btn" data-value="2">2</button>
        <button class="keypad-btn" data-value="3">3</button>
        <button class="keypad-btn" data-value="4">4</button>
        <button class="keypad-btn" data-value="5">5</button>
        <button class="keypad-btn" data-value="6">6</button>
        <button class="keypad-btn" data-value="7">7</button>
        <button class="keypad-btn" data-value="8">8</button>
        <button class="keypad-btn" data-value="9">9</button>
        <button class="keypad-btn" data-value="10">10</button>
        <button id="confirm-bid" class="keypad-btn confirm-btn">é–‹å§‹å«ç‰Œ</button>
        </div>
    </div>

    <!-- è¦å‰‡æ¨¡æ…‹æ¡† -->
    <div id="rules-modal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>éŠæˆ²è¦å‰‡</h2>
                <span class="close" onclick="closeRules()">&times;</span>
            </div>
            <div class="modal-body">
                <h3>å¾·åœ‹æ©‹ç‰Œè¨˜åˆ†è¦å‰‡</h3>
                <p>1. æ¯ä½ç©å®¶è¼ªæµå«ç‰Œï¼Œé æ¸¬è‡ªå·±èƒ½è´å¾—çš„å¢©æ•¸</p>
                <p>2. å«ç‰Œç¸½æ•¸ä¸èƒ½ç­‰æ–¼ç™¼ç‰Œæ•¸é‡</p>
                <p>3. å‡ºç‰Œå¾Œï¼Œæ ¹æ“šå¯¦éš›è´å¾—çš„å¢©æ•¸è¨ˆç®—åˆ†æ•¸</p>
                <p>4. åˆ†æ•¸è¨ˆç®—ï¼š</p>
                <ul>
                    <li>å«ç‰Œæº–ç¢ºï¼š10 + (å¢©æ•¸ Ã— å¢©æ•¸) åˆ†</li>
                    <li>å«ç‰Œä¸æº–ï¼š-(å·®ç•° Ã— å·®ç•°) åˆ†</li>
                </ul>
                <p>5. éŠæˆ²é€²è¡Œå¤šå›åˆï¼Œç‰Œæ•¸å…ˆéå¢å¾Œéæ¸›</p>
            </div>
        </div>
    </div>

    <script src="js/storage.js"></script>
    <script src="js/game.js"></script>
    <script>
        function showRules() {
            document.getElementById('rules-modal').style.display = 'block';
        }
        
        function closeRules() {
            document.getElementById('rules-modal').style.display = 'none';
        }
        
        // é»æ“Šæ¨¡æ…‹æ¡†å¤–éƒ¨é—œé–‰
        window.onclick = function(event) {
            const modal = document.getElementById('rules-modal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>
</body>
</html> 